(this["webpackJsonptamagotchi-virtual-pet"]=this["webpackJsonptamagotchi-virtual-pet"]||[]).push([[0],{291:function(e,t,a){"use strict";a.r(t);var n=a(9),c=a(0),i=a.n(c),r=a(14),s=a.n(r),o=a(111),u=a(21),l=a(37),d=a.p+"static/media/disaster-pet.66e47975.svg",j=a.p+"static/media/exercise-pet.75910bf6.svg",p=a.p+"static/media/food-pet.9caf0685.svg",b=a.p+"static/media/mischief-pet.8eb9f2c1.svg",m=a.p+"static/media/sick-pet.756362e5.svg",h=a.p+"static/media/tricks-pet.bed47d2e.svg",g=a.p+"static/media/welcome-pet.2e06b49f.svg",f=function(e,t){var a,n,c;return a=(new Date).getTime()+t,n=null,c=function(){return a+=t,n=setTimeout(c,a-(new Date).getTime()),e()},function(){return n},{cancel:function(){return clearTimeout(n)},timeoutID:n=setTimeout(c,a-(new Date).getTime())}},O=a(311),x=a(172);function v(){return Object(n.jsxs)(x.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(n.jsx)(O.a,{color:"inherit",href:"#",children:"Tamagotchi Inspired Virtual Pet Game"})," ",(new Date).getFullYear(),"."]})}var y=a.p+"static/media/born-pet.795e4fb5.svg",k=a.p+"static/media/dead-pet.4e5c176a.svg",S=a.p+"static/media/happy-pet.37a25a85.svg",C=a.p+"static/media/love-pet.ac68afd2.svg",w=a.p+"static/media/sad-pet.f8da9027.svg",N=a.p+"static/media/crying-pet.1173674d.svg",I=a(244),D=a(312),P=Object(I.a)((function(e){return{image:{width:130,height:130},img:{margin:"auto",display:"block",maxWidth:"100%",maxHeight:"100%"}}}));function T(e){var t=P(),a=Object(c.useState)(y),i=Object(l.a)(a,2),r=i[0],s=i[1];return Object(c.useEffect)((function(){[y,k,S,w,g,C,N].forEach((function(e){(new Image).src=e}))}),[]),Object(c.useEffect)((function(){0===e.age?s(y):e.age>3&&(e.happiness>=70&&e.happiness<=90?s(S):e.happiness<=30&&e.happiness>0?s(w):e.happiness>90?s(C):0===e.happiness?s(N):s(g)),0===e.health&&s(k)}),[e.age,e.happiness,e.health]),Object(n.jsx)(D.a,{in:!0,style:{transitionDelay:"500ms"},children:Object(n.jsx)("img",{className:t.img,alt:e.name,src:r})})}var E=a(250),F=a(160),R=a(313);function L(e){return Object(n.jsxs)(F.a,{display:"flex",alignItems:"center",children:[Object(n.jsx)(F.a,{width:"100%",mr:1,children:Object(n.jsx)(R.a,Object(E.a)({variant:"determinate"},e))}),Object(n.jsx)(F.a,{minWidth:35,children:Object(n.jsx)(x.a,{variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})}var G=a(296),M=a(317),W=a(318),q=a(253),B=a(326),H=a(319),J=a(322),U=a(323),V=a(324),Y=a(325),z=a(171),A=Object(I.a)((function(e){return{root:{flexGrow:1,alignItems:"center",justifyContent:"center",flexDirection:"column"},paper:{padding:e.spacing(2),margin:"2rem auto",maxWidth:680},avatarLarge:{width:72,height:72}}}));function K(e){return e.status>=200&&e.status<300||429===e.status?Promise.resolve(e):Promise.reject(new Error(e.statusText))}function Q(e){return e.json()}var X=function(e){return e>=0&&e<=100?e:e>100?100:0};var Z=a(328),$=a(327),_=Object(I.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(".concat(g,")"),backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),ee={step:1,min:1,max:60};var te=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,329)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),i(e),r(e)}))};s.a.render(Object(n.jsx)(o.a,{children:Object(n.jsxs)(u.c,{children:[Object(n.jsx)(u.a,{exact:!0,path:"/",component:function(){var e=Object(u.f)(),t=_(),a=Object(c.useState)("Pippin"),i=Object(l.a)(a,2),r=i[0],s=i[1],o=Object(c.useState)(5),d=Object(l.a)(o,2),j=d[0],p=d[1];return Object(n.jsxs)(B.a,{container:!0,component:"main",className:t.root,children:[Object(n.jsx)(W.a,{}),Object(n.jsx)(B.a,{item:!0,xs:!1,sm:4,md:7,className:t.image}),Object(n.jsx)(B.a,{item:!0,xs:12,sm:8,md:5,component:q.a,elevation:6,square:!0,children:Object(n.jsxs)("div",{className:t.paper,children:[Object(n.jsx)(Z.a,{className:t.avatar}),Object(n.jsx)(x.a,{component:"h1",variant:"h5",children:"Start your game by giving your pet a name and setting the speed!"}),Object(n.jsxs)("form",{className:t.form,onSubmit:function(t){t.preventDefault(),""!==r&&""!==j&&e.push("/play/"+encodeURIComponent(r)+"/"+j)},method:"post",children:[Object(n.jsx)($.a,{variant:"outlined",margin:"normal",fullWidth:!0,required:!0,id:"pet-name",label:"Your Pet Name",name:"name",autoComplete:"name",autoFocus:!0,value:r,onChange:function(e){s(e.target.value)}}),Object(n.jsx)($.a,{id:"day-duration",label:"Day Duration (in seconds)",variant:"outlined",type:"number",defaultValue:j,inputProps:ee,fullWidth:!0,InputLabelProps:{shrink:!0},onChange:function(e){p(e.target.value)}}),Object(n.jsx)(G.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Start Game!"}),Object(n.jsx)(F.a,{mt:5,children:Object(n.jsx)(v,{})})]})]})})]})}}),Object(n.jsx)(u.a,{path:"/play/:petName?/:dayDurationInSeconds?",component:function(){var e=Object(c.useState)("Pippin"),t=Object(l.a)(e,2),a=t[0],r=t[1],s=Object(c.useState)(1e3),o=Object(l.a)(s,2),O=o[0],y=o[1],k=Object(c.useState)(0),S=Object(l.a)(k,2),C=S[0],w=S[1],N=Object(c.useState)(100),I=Object(l.a)(N,2),D=I[0],P=I[1],E=Object(c.useState)(0),F=Object(l.a)(E,2),R=F[0],Z=F[1],$=Object(c.useState)(100),_=Object(l.a)($,2),ee=_[0],te=_[1],ae=Object(c.useState)(!1),ne=Object(l.a)(ae,2),ce=ne[0],ie=ne[1],re=Object(c.useState)(!1),se=Object(l.a)(re,2),oe=se[0],ue=se[1],le=Object(c.useRef)(),de=Object(c.useRef)(),je=A(),pe=Object(u.g)(),be=pe.petName,me=pe.dayDurationInSeconds,he=function(e){if(null!==le.current){var t=f((function(){ge()}),e);de.current=t}},ge=function(){fetch("https://www.virtual-pet.uk/v1/event").then(K).then(Q).then((function(e){"Error"===e.type?(console.log("Request failed",e),de.current&&(de.current.cancel(),de.current=null),he(e.nextEvent*O)):(console.log("Request succeeded with JSON response",e),P((function(t){return X(t+e.impact.health)})),Z((function(t){return X(t+e.impact.hunger)})),te((function(t){return X(t+e.impact.happiness)})),ve(e.type.toUpperCase()+"! "+e.title+": "+e.description+" Impact, health: "+e.impact.health+" hunger: "+e.impact.hunger+" happiness: "+e.impact.happiness,function(e){var t;switch(e){case"Natural Disaster":t=d;break;case"Food":t=p;break;case"Mischief":t=b;break;case"Disease":t=m;break;case"Tricks":t=h;break;case"Exercise":t=j;break;default:t=g}return t}(e.type)),de.current&&(de.current.cancel(),de.current=null),he(e.nextEvent*O))})).catch((function(e){console.log("Request failed",e)}))},fe=function(){w((function(e){return e+1})),P((function(e){return X(e-1)})),Z((function(e){return X(e+1)})),te((function(e){return X(e-(Math.floor(5*Math.random())+1))}))},Oe=function(){w(0),P(100),Z(0),te(100),ie(!1)},xe=function(){ue(!1)},ve=Object(c.useCallback)((function(e,t){return z.StaticBanner.show({icon:Object(n.jsx)("div",{}),iconProps:{src:t,className:je.avatarLarge},open:!0,label:e})}),[je.avatarLarge]),ye=function(){le.current&&le.current.cancel(),de.current&&de.current.cancel(),le.current=null,de.current=null};return Object(c.useEffect)((function(){D<=0&&(ue(!0),ie(!0))}),[D]),Object(c.useEffect)((function(){if(ce)ye();else{if(void 0!==be&&r(decodeURIComponent(be)),void 0===me||Number.isNaN(parseInt(me)))y(1e3);else{var e=parseInt(me);y(e<=0?1e3:e>60?6e4:1e3*e)}!function(){var e=f((function(){fe()}),O);le.current=e}(),he(5*O)}return ye}),[ce,be,me,O]),Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsx)(W.a,{}),Object(n.jsx)(z.StaticBanner,{}),Object(n.jsxs)(B.a,{container:!0,component:"main",className:je.root,children:[Object(n.jsx)(q.a,{className:je.paper,children:Object(n.jsxs)(B.a,{container:!0,spacing:2,children:[Object(n.jsx)(B.a,{item:!0,xs:8,sm:8,md:6,container:!0,children:Object(n.jsx)(B.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:2,children:Object(n.jsxs)(B.a,{item:!0,xs:!0,children:[Object(n.jsx)(x.a,{variant:"h2",children:a}),Object(n.jsxs)(x.a,{variant:"h6",children:["Age: ",C]}),Object(n.jsx)(x.a,{variant:"body1",children:"Health:"}),Object(n.jsx)(L,{value:D}),Object(n.jsx)(x.a,{variant:"body1",children:"Hunger:"}),Object(n.jsx)(L,{value:R}),Object(n.jsx)(x.a,{variant:"body1",children:"Happiness:"}),Object(n.jsx)(L,{value:ee}),Object(n.jsxs)(M.a,{color:"primary",variant:"contained","aria-label":"outlined primary button group",children:[Object(n.jsx)(G.a,{disabled:ce,onClick:function(){ce||P((function(e){return X(e+1)}))},children:"Clean"}),Object(n.jsx)(G.a,{disabled:ce,onClick:function(){ce||Z((function(e){return X(e-1)}))},children:"Feed"}),Object(n.jsx)(G.a,{disabled:ce,onClick:function(){ce||te((function(e){return X(e+(Math.floor(5*Math.random())+1))}))},children:"Play"})]}),Object(n.jsx)(G.a,{onClick:Oe,children:ce?"Play again!":"Reset Game"})]})})}),Object(n.jsx)(B.a,{item:!0,xs:4,sm:4,md:6,children:Object(n.jsx)(T,{name:a,happiness:ee,age:C,health:D})})]})}),Object(n.jsx)(v,{})]}),ce&&Object(n.jsxs)(H.a,{open:oe,onClose:xe,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(n.jsx)(Y.a,{id:"alert-dialog-title",children:"Game Over."}),Object(n.jsx)(U.a,{children:Object(n.jsx)(V.a,{id:"alert-dialog-description",children:"Great job! Let's play again!"})}),Object(n.jsxs)(J.a,{children:[Object(n.jsx)(G.a,{onClick:xe,color:"primary",children:"Close"}),Object(n.jsx)(G.a,{onClick:Oe,color:"primary",autoFocus:!0,children:"Start Over!"})]})]})]})}})]})}),document.getElementById("root")),te(console.log)}},[[291,1,2]]]);
//# sourceMappingURL=main.1c246ad0.chunk.js.map